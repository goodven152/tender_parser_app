# Tender Parser Admin (Branch `add_arg_test`)

**Tender Parser Admin** ‚Äî —ç—Ç–æ –≤–µ–±‚Äë–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–æ–º *tender parser GETenders*¬†‚Äî –≤–Ω–µ—à–Ω–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ –≥—Ä—É–∑–∏–Ω—Å–∫–∏—Ö —Ç–µ–Ω–¥–µ—Ä–æ–≤.  
–ü–∞–Ω–µ–ª—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω–∞: backend (FastAPI¬†+¬†APScheduler) –∏ frontend (Flutter¬†Web) —Å—Ç–∞—Ä—Ç—É—é—Ç –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π Docker¬†Compose –∏ —Ä–∞–±–æ—Ç–∞—é—Ç ¬´–∏–∑ –∫–æ—Ä–æ–±–∫–∏¬ª.

---

## üìÇ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

| –ü—É—Ç—å | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ |
|------|------------|
| `backend/` | FastAPI API, cron‚Äë–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫, Dockerfile |
| `frontend/` ‚Üí `admin/` | Flutter Web‚Äë–∞–¥–º–∏–Ω–∫–∞ |
| `config.json` | –ö–æ–Ω—Ñ–∏–≥ –ø–∞—Ä—Å–µ—Ä–∞ (–∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, –ø—Ä–æ–∫—Å–∏ –∏¬†—Ç.–¥.) |
| `docker-compose.yml` | –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è `backend`¬†+¬†`frontend` |
| `logs/` | JSON‚Äë—Ñ–∞–π–ª—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ stdout‚Äë–ª–æ–≥–∏ |

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

> –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: **Docker¬†20.10+** –∏ **docker‚Äëcompose¬†v2** (–≤—Ö–æ–¥–∏—Ç –≤ CLI).

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/goodven152/tender_parser_app.git -b add_arg_test
cd tender_parser_app

# 2. (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ø—Ä–∞–≤–∏–º config.json –ø–æ–¥ —Å–≤–æ–∏ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞

# 3. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (~5‚Äë7¬†–º–∏–Ω –Ω–∞ –±–∏–ª–¥ –æ–±—Ä–∞–∑–æ–≤)
docker compose up -d          # backend:8000, frontend:8080

# 4. –û—Ç–∫—Ä—ã–≤–∞–µ–º –±—Ä–∞—É–∑–µ—Ä
http://localhost:8080
```

–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º:

1. **Backend‚Äë–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**  
   * –ö–ª–æ–Ω–∏—Ä—É–µ—Ç –Ω—É–∂–Ω—É—é –≤–µ—Ç–∫—É `parser_GETenders` –≤ `/opt/parser`.  
   * –ü—Ä–∏ –ø–µ—Ä–≤–æ–º —Å—Ç–∞—Ä—Ç–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç –º–æ–¥–µ–ª—å Stanza (`ka`) –∏ —Å—Ç–∞–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.  
   * –ó–∞–ø—É—Å–∫–∞–µ—Ç Uvicorn –ø–æ –∞–¥—Ä–µ—Å—É `0.0.0.0:8000`.

2. **Frontend‚Äë–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**  
   * –°–æ–±–∏—Ä–∞–µ—Ç Flutter‚ÄëWeb (–æ–±—Ä–∞–∑ `ghcr.io/cirruslabs/flutter`).  
   * –û—Ç–¥–∞—ë—Ç —Å—Ç–∞—Ç–∏–∫—É Nginx‚Äëalpine –Ω–∞ `8080`.

---

## üîÑ –ö–∞–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–æ–¥

* **–ü–∞—Ä—Å–µ—Ä** –∂–∏–≤—ë—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º Docker‚Äë—Ç–æ–º–µ `tender_parser_repo`.  
  –ü—Ä–∏ `docker restart backend` entrypoint –¥–µ–ª–∞–µ—Ç `git pull` –∏, –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è
  `requirements.txt`,¬†‚Äî –¥–æ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã.  
* **–°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** (Chromium, Stanza‚Äë–º–æ–¥–µ–ª—å, Python‚Äë–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ backend)
  –∑–∞–ø–µ–∫–∞—é—Ç—Å—è –≤ –æ–±—Ä–∞–∑–µ –∏ –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ** –∫–æ–≥–¥–∞ –ø—Ä–∞–≤–∏—Ç—Å—è
  `backend/Dockerfile` –∏–ª–∏ `backend/requirements.txt`.

---

## üåê API‚Äë—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã backend

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| `POST` | `/run` | –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞ –≤—Ä—É—á–Ω—É—é, –æ—Ç–≤–µ—á–∞–µ—Ç `run_id` |
| `WS` | `/ws` | Live‚Äë—Å—Ç—Ä–∏–º –ª–æ–≥–æ–≤ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ |
| `GET` | `/runs` | –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 –∑–∞–ø—É—Å–∫–æ–≤ |
| `GET` | `/next_run` | –î–∞—Ç–∞/–≤—Ä–µ–º—è –ø–ª–∞–Ω–æ–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ |
| `GET/PUT` | `/config` | –ü–æ–ª—É—á–∏—Ç—å/–∑–∞–º–µ–Ω–∏—Ç—å —Ü–µ–ª–∏–∫–æ–º `config.json` |
| `GET/PUT` | `/keywords` | –ü–æ–ª—É—á–∏—Ç—å/—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–∞—Å—Å–∏–≤ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ |

---

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ‚Äë—É–º–æ–ª—á–∞–Ω–∏—é | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|--------------|-----------|
| `CRON_EXPR` | `0 2 * * *` | Cron‚Äë–≤—ã—Ä–∞–∂–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ |
| `TZ` | `UTC` | –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å backend |
| `REPO_URL` | `https://github.com/goodven152/parser_GETenders.git` | URL –ø–∞—Ä—Å–µ—Ä–∞ |
| `REPO_BRANCH` | `add_arg_test` | –í–µ—Ç–∫–∞ –ø–∞—Ä—Å–µ—Ä–∞ |

–ò–∑–º–µ–Ω—è—é—Ç—Å—è –≤ `docker-compose.yml`, –ø—Ä–∏–º–µ—Ä:

```yaml
services:
  backend:
    environment:
      - CRON_EXPR=0 */6 * * *   # –∫–∞–∂–¥—ã–µ 6¬†—á–∞—Å–æ–≤
      - TZ=Asia/Tbilisi
      - REPO_BRANCH=add_arg_test
```

---

## üõ†Ô∏è –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –±–µ–∑ Docker

```bash
# Backend
cd backend
python -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt
uvicorn main:app --reload

# Frontend
cd frontend/admin
flutter run -d chrome   --web-port 8080   --dart-define=API_URL=http://localhost:8000
```

---

## ‚ùì FAQ

* **–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–∞ –ø–æ—è–≤–∏–ª–∏—Å—å –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**  
  –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend: `docker compose up -d --build backend`.

* **CORS‚Äë–æ—à–∏–±–∫–∞, –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞—é HTML –Ω–∞–ø—Ä—è–º—É—é**  
  –ó–∞–ø—É—Å–∫–∞–π—Ç–µ —Ñ—Ä–æ–Ω—Ç —á–µ—Ä–µ–∑ Nginx (`docker compose up frontend`)
  –∏–ª–∏ –≤—Ä—É—á–Ω—É—é —É–∫–∞–∑–∞–≤ `--dart-define=API_URL`.

* **–•–æ—á—É –ø–æ–º–µ–Ω—è—Ç—å –ø—É—Ç—å, –≥–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–ª–æ–Ω –ø–∞—Ä—Å–µ—Ä–∞**  
  –í `backend/Dockerfile` –∏–∑–º–µ–Ω–∏—Ç–µ  
  `ENV APP_DIR=/opt/parser` –∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑.

---
