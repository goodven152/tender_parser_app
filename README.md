# Tender Parser Admin

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π** –≤–µ–±‚Äë–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Python‚Äë–ø–∞—Ä—Å–µ—Ä–æ–º [parser_GETenders](https://github.com/goodven152/parser_GETenders) (–≤–µ—Ç–∫–∞ `add_arg_launch`).
–ê–¥–º–∏–Ω‚Äë–ø–∞–Ω–µ–ª—å –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã API, –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–∞—Ä—Å–µ—Ä –≤—Ä—É—á–Ω—É—é, –≤–∏–¥–µ—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∑–∞–ø—É—Å–∫–æ–≤, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `config.json` –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–ø–∏—Å–∫–æ–º –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤.

## –°–æ—Å—Ç–∞–≤ –ø—Ä–æ–µ–∫—Ç–∞

| –ü—É—Ç—å                 | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                               |
| -------------------- | ---------------------------------------- |
| `backend/`           | FastAPI + APScheduler + SQLite           |
| `frontend/`¬†`admin/` | Flutter¬†Web‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ                   |
| `config.json`        | –ö–æ–Ω—Ñ–∏–≥ –ø–∞—Ä—Å–µ—Ä–∞ (–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä) |
| `docker-compose.yml` | –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –¥–≤—É—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤             |
| `logs/`              | –ü–∞–ø–∫–∞ –¥–ª—è JSON‚Äë—Ñ–∞–π–ª–æ–≤ –∏ stdout‚Äë–ª–æ–≥–æ–≤     |

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

> –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: **Docker¬†20.10+** –∏ **docker‚Äëcompose¬†v2**.

```bash
# 1. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–∞—Ç–∞–ª–æ–≥
$ git clone <repo>
$ cd tender_parser_app

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ / –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ config.json (–∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, –ø—Ä–æ–∫—Å–∏ –∏ –ø—Ä.)

# 3. –ó–∞–ø—É—Å–∫ (–ø–µ—Ä–≤—ã–π –±–∏–ª–¥ –∑–∞–π–º—ë—Ç ~5‚Äë7¬†–º–∏–Ω—É—Ç)
$ docker compose up -d        # –±–∏–ª–¥–∏—Ç –∏ –ø–æ–¥–Ω–∏–º–∞–µ—Ç backend:8000 + frontend:8080

# 4. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É
üëâ http://localhost:8080
```

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

1. **Backend‚Äë–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**

   - —Å–∫–∞—á–∏–≤–∞–µ—Ç –≤–µ—Ç–∫—É `add_arg_launch` –ø–∞—Ä—Å–µ—Ä–∞ –≤¬†`/opt/parser`;
   - —Å—Ç–∞–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–∞—Ä—Å–µ—Ä–∞ + —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ (FastAPI, APScheduler‚Ä¶);
   - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç `PYTHONPATH`, —á—Ç–æ–±—ã `python¬†-m¬†ge_parser_tenders.cli` –±—ã–ª –≤–∏–¥–∏–º—ã–º;
   - —Å–æ–∑–¥–∞—ë—Ç SQLite¬†–ë–î¬†`/app/runs.db` –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø—É—Å–∫–æ–≤;
   - —Å—Ç–∞—Ä—Ç—É–µ—Ç Uvicorn –Ω–∞¬†`0.0.0.0:8000`.

2. **Frontend‚Äë–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**

   - —Å–æ–±–∏—Ä–∞–µ—Ç Flutter Web —á–µ—Ä–µ–∑ –æ–±—Ä–∞–∑ `ghcr.io/cirruslabs/flutter:3.29.3`;
   - –∫–ª–∞–¥—ë—Ç —Å—Ç–∞—Ç–∏–∫—É –≤ Nginx‚Äëalpine, –∫–æ—Ç–æ—Ä—ã–π —Å–ª—É—à–∞–µ—Ç `:80` ‚Üí –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞—Ä—É–∂—É –Ω–∞¬†`8080`.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API

| –ú–µ—Ç–æ–¥  | URL         | –û–ø–∏—Å–∞–Ω–∏–µ                                         |
| ------ | ----------- | ------------------------------------------------ |
| `POST` | `/run`      | –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–µ—Ä –≤—Ä—É—á–Ω—É—é. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `run_id`.   |
| `WS`   | `/ws`       | Live‚Äë—Å—Ç—Ä–∏–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏ stdout‚Äë–ª–æ–≥–æ–≤.             |
| `GET`  | `/runs`     | –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 –∑–∞–ø—É—Å–∫–æ–≤ (id, –≤—Ä–µ–º—è, –∫–æ–¥ –≤–æ–∑–≤—Ä–∞—Ç–∞). |
| `GET`  | `/next_run` | –î–∞—Ç–∞/–≤—Ä–µ–º—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–ª–∞–Ω–æ–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞.         |
| `GET`  | `/keywords` | –ú–∞—Å—Å–∏–≤ `KEYWORDS_GEO` –∏–∑ `config.json`.          |
| `PUT`  | `/keywords` | –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤.       |
| `GET`  | `/config`   | –ü–æ–ª–Ω—ã–π `config.json`                             |
| `PUT`  | `/config`   | –ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥ —Ü–µ–ª–∏–∫–æ–º.                   |

> **CORS**: Backend –æ—Ç–∫—Ä—ã—Ç –¥–ª—è `http://localhost:8080` (—Å–º. middleware –≤¬†`main.py`).

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ Docker

```bash
# Backend
cd backend
python -m venv .venv && . .venv/bin/activate
pip install -r requirements.txt
python main.py   # Uvicorn –ø–æ–¥–Ω–∏–º–µ—Ç—Å—è –Ω–∞ :8000

# Frontend
cd frontend/admin
flutter run -d chrome --web-port 8080 --dart-define=API_URL=http://localhost:8000
```

> –ú–∞—Ä—à—Ä—É—Ç—ã –≤ Flutter —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `API_URL` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é origin —Å—Ç—Ä–∞–Ω–∏—Ü—ã).

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è  | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é  | –ó–Ω–∞—á–µ–Ω–∏–µ                                |
| ----------- | ------------- | --------------------------------------- |
| `CRON_EXPR` | `"0 2 * * *"` | crontab‚Äë–≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø–ª–∞–Ω–æ–≤—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤ |
| `TZ`        | `UTC`         | —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ backend  |

–ü—Ä–∏–º–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ `docker-compose.yml`:

```yaml
services:
  backend:
    environment:
      - CRON_EXPR=0 */6 * * * # —Ä–∞–∑ –≤ 6 —á–∞—Å–æ–≤
      - TZ=Asia/Nicosia
```

## FAQ

<details>
<summary>‚ö†Ô∏è  CORS‚Äë–æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä—è–º–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ñ—Ä–æ–Ω—Ç–∞ –∏–∑ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã</summary>
–ë—Ä–∞—É–∑–µ—Ä—É –Ω—É–∂–Ω—ã –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ origin‚Äô—ã. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç —á–µ—Ä–µ–∑ Docker/nginx (`localhost:8080`) **–∏–ª–∏** –≤–∫–ª—é—á–∏—Ç–µ –≤–µ–±‚Äë—Å–µ—Ä–≤–µ—Ä —Å —Ç–µ–º¬†–∂–µ –¥–æ–º–µ–Ω–æ–º/–ø–æ—Ä—Ç–æ–º.
</details>

<details>
<summary>‚öôÔ∏è  –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å –ø—É—Ç—å, –≥–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è parser_GETenders?</summary>
–ü—Ä–∞–≤—å—Ç–µ `backend/Dockerfile`:
```dockerfile
RUN git clone ‚Ä¶ /opt/parser   # ‚Üê —Å—é–¥–∞
ENV PYTHONPATH="/opt/parser:${PYTHONPATH}"
```
–ò –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ backend.
</details>

---
